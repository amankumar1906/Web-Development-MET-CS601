<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MET | Currency Converter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  
    <script type="module">
        import { getCurrencyList, getExchange } from './scripts/Converter.js';

        window.addEventListener("DOMContentLoaded", event => {
            getCurrencyList().then(results => {
                let html = `<option value='-1'>Please select your currency</option>`;
                if (results) {
                    results.forEach(currency => {
                        html += `<option value='${currency}'>${currency}</option>`;
                    });
                    document.querySelector("#currencyList").innerHTML = html;
                } 
            });

            document.querySelector("#currencyList").addEventListener("change", event => {
                getExchange(event.target.value).then(details => {
                    document.querySelector("#currencyExchangeValue").innerHTML = JSON.stringify(details);
                });
            });
        });
    </script>
</head>
  <body>
    <h1 class="display-1">Please select from the available currencies</h1>
    <select id="currencyList"></select>
    <div id="currencyExchangeValue"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  </body>
</html>